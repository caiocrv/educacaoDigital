<!DOCTYPE html>
<html lang="pt-br">
<head>
  <div class="navbar">
      <a href="/home">
          <img src="{{ url_for('static', filename='img/logo.png') }}" alt="logo" width="120" height="120">
      </a>
  </div>
  <meta charset="UTF-8">
  <title>Quiz de Python</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='quizPython.css') }}">
</head>
<body>
  <h2>Quiz de Python</h2>
  <form id="quizForm">
    <ol>
      <li>
        <label> Qual é o tipo de dado retornado pela função <code>input()</code>?</label><br>
        <input type="radio" name="q1" value="str" required> str<br>
        <input type="radio" name="q1" value="int"> int<br>
        <input type="radio" name="q1" value="bool"> bool<br>
        <input type="radio" name="q1" value="float"> float<br>
      </li><br>

      <li>
        <label> Qual palavra-chave é usada para definir uma função em Python?</label><br>
        <input type="radio" name="q2" value="def" required> def<br>
        <input type="radio" name="q2" value="func"> func<br>
        <input type="radio" name="q2" value="lambda"> lambda<br>
        <input type="radio" name="q2" value="define"> define<br>
      </li><br>

      <li>
        <label> Qual é o resultado de <code>3 * 'a'</code>?</label><br>
        <input type="radio" name="q3" value="aaa" required> aaa<br>
        <input type="radio" name="q3" value="a3"> a3<br>
        <input type="radio" name="q3" value="3a"> 3a<br>
        <input type="radio" name="q3" value="erro"> erro<br>
      </li><br>

      <li>
        <label> Como você cria um dicionário em Python?</label><br>
        <input type="radio" name="q4" value="{}" required> {}<br>
        <input type="radio" name="q4" value="[]"> []<br>
        <input type="radio" name="q4" value="()"> ()<br>
        <input type="radio" name="q4" value="<>"> <><br>
      </li><br>

      <li>
        <label> Qual é o operador lógico para "e" em Python?</label><br>
        <input type="radio" name="q5" value="and" required> and<br>
        <input type="radio" name="q5" value="or"> or<br>
        <input type="radio" name="q5" value="&&"> &&<br>
        <input type="radio" name="q5" value="e"> e<br>
      </li><br>
    </ol>
    <button type="submit">Enviar Respostas</button>
    <br><br>
    <a href="/home">Conteúdos</a>
  </form>

  <h3>Resultado:</h3>
  <pre id="jsonOutput"></pre>

  <script>
    const form = document.getElementById('quizForm');
    const jsonOutput = document.getElementById('jsonOutput');

    const respostasCorretas = {
      q1: 'str',
      q2: 'def',
      q3: 'aaa',
      q4: '{}',
      q5: 'and'
    };

    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const formData = new FormData(form);
      let acertos = 0;

      for (let [key, value] of formData.entries()) {
        if (value.trim().toLowerCase() === respostasCorretas[key]) {
          acertos++;
        }
      }

      const resultado = {
        quiz: "Python",
        acertos: acertos,
        total: Object.keys(respostasCorretas).length,
        data: new Date().toISOString()
      };

      jsonOutput.textContent = JSON.stringify(resultado, null, 2);

      fetch('/saveReviews', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(resultado)
      })
      .then(res => res.json())
      .then(data => {
        console.log("Resposta do servidor:", data);
      })
      .catch(error => {
        console.error("Erro ao enviar acertos:", error);
      });

      form.reset();
    });
  </script>
</body>
</html>
