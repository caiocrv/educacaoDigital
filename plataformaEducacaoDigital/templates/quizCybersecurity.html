<!DOCTYPE html>
<html lang="pt-br">
<head>
  <div class="navbar">
      <a href="/home">
          <img src="{{ url_for('static', filename='img/logo.png') }}" alt="logo" width="120" height="120">
      </a>
  </div>
  <meta charset="UTF-8">
  <title>Quiz de Cibersegurança</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='quizCybersecurity.css') }}">
</head>
<body>
  <h2>Quiz de Cibersegurança</h2>
  <form id="quizForm">
    <ol>
      <li>
        <label>1. O que é phishing?</label><br>
        <input type="radio" name="q1" value="ataque de engenharia social" required> Ataque de engenharia social<br>
        <input type="radio" name="q1" value="tipo de firewall"> Tipo de firewall<br>
        <input type="radio" name="q1" value="backup em nuvem"> Backup em nuvem<br>
        <input type="radio" name="q1" value="criptografia"> Criptografia<br>
      </li><br>

      <li>
        <label>2. Qual dessas senhas é considerada forte?</label><br>
        <input type="radio" name="q2" value="S3nh@F0rte!" required> S3nh@F0rte!<br>
        <input type="radio" name="q2" value="123456"> 123456<br>
        <input type="radio" name="q2" value="senha"> senha<br>
        <input type="radio" name="q2" value="abcdef"> abcdef<br>
      </li><br>

      <li>
        <label>3. O que significa autenticação de dois fatores (2FA)?</label><br>
        <input type="radio" name="q3" value="duas formas de verificação" required> Duas formas de verificação<br>
        <input type="radio" name="q3" value="uma senha difícil"> Uma senha difícil<br>
        <input type="radio" name="q3" value="login com Facebook"> Login com Facebook<br>
        <input type="radio" name="q3" value="senha duplicada"> Senha duplicada<br>
      </li><br>

      <li>
        <label>4. Um software que detecta e remove vírus é chamado de?</label><br>
        <input type="radio" name="q4" value="antivírus" required> Antivírus<br>
        <input type="radio" name="q4" value="firewall"> Firewall<br>
        <input type="radio" name="q4" value="sistema operacional"> Sistema operacional<br>
        <input type="radio" name="q4" value="backup"> Backup<br>
      </li><br>

      <li>
        <label>5. O que é um ransomware?</label><br>
        <input type="radio" name="q5" value="software de sequestro de dados" required> Software de sequestro de dados<br>
        <input type="radio" name="q5" value="antivírus"> Antivírus<br>
        <input type="radio" name="q5" value="programa educativo"> Programa educativo<br>
        <input type="radio" name="q5" value="tipo de hardware"> Tipo de hardware<br>
      </li><br>
    </ol>
    <button type="submit">Enviar Respostas</button>
    <br><br>
    <a href="/home">Conteúdos</a>
  </form>

  <h3>Resultado:</h3>
  <pre id="jsonOutput"></pre>

  <script>
    const form = document.getElementById('quizForm');
    const jsonOutput = document.getElementById('jsonOutput');

    const respostasCorretas = {
      q1: 'ataque de engenharia social',
      q2: 'S3nh@F0rte!',
      q3: 'duas formas de verificação',
      q4: 'antivírus',
      q5: 'software de sequestro de dados'
    };

    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const formData = new FormData(form);
      let acertos = 0;

      for (let [key, value] of formData.entries()) {
        if (value.trim().toLowerCase() === respostasCorretas[key].toLowerCase()) {
          acertos++;
        }
      }

      const resultado = {
        quiz: "Cibersegurança",
        acertos: acertos,
        total: Object.keys(respostasCorretas).length,
        data: new Date().toISOString()
      };

      jsonOutput.textContent = JSON.stringify(resultado, null, 2);

      fetch('/saveReviews', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(resultado)
      })
      .then(res => res.json())
      .then(data => {
        console.log("Resposta do servidor:", data);
      })
      .catch(error => {
        console.error("Erro ao enviar acertos:", error);
      });

      form.reset();
    });
  </script>
</body>
</html>
